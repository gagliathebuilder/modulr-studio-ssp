generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Publisher {
  id            Int       @id @default(autoincrement())
  name          String
  email         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  episodes      Episode[]
  campaigns     Campaign[]
}

model Episode {
  id               Int       @id @default(autoincrement())
  title            String
  rssUrl           String?
  transcript       String?
  enrichedMetadata Json?
  brandSafetyScore Float?
  sentiment        String?
  contextualScore  Float?
  createdAt        DateTime  @default(now())
  publisher        Publisher @relation(fields: [publisherId], references: [id])
  publisherId      Int
  analysisLogs     AnalysisLog[]
}

model Campaign {
  id            Int       @id @default(autoincrement())
  name          String
  status        String
  budget        Float
  impressions   Int
  ctr           Float
  createdAt     DateTime  @default(now())
  publisher     Publisher @relation(fields: [publisherId], references: [id])
  publisherId   Int
}

model AnalysisLog {
  id          Int      @id @default(autoincrement())
  episodeId   Int
  rawInput    String?
  outputData  Json?
  createdAt   DateTime @default(now())
  episode     Episode  @relation(fields: [episodeId], references: [id])
}